# Language setting
language: node_js

env:
  global:
    - FOO=FUBU
    
build:
  pre_ci_boot:
    image_name: ship-dtr.in/scriptnull/sample_node
    image_tag: beta.dtr.3
    pull: true
    
  ci:
    - ps -eax
    - ls -al

  post_ci:
    - echo "post ci stage"
    - docker build -t="ship-dtr.in/scriptnull/sample_node:beta.$BRANCH.$BUILD_NUMBER" .
    - docker push "ship-dtr.in/scriptnull/sample_node:beta.$BRANCH.$BUILD_NUMBER"

integrations:
  hub:
    - integrationName: "dtr-test"
      type: "Docker Trusted Registry"
